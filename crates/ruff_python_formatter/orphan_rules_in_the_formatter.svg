<svg xmlns="http://www.w3.org/2000/svg" width="904.449" height="1205.55" viewBox="0 0 904.449 1205.55"><defs><style>@font-face{font-family:&quot;Virgil&quot;;src:url(https://excalidraw.com/Virgil.woff2)}@font-face{font-family:&quot;Cascadia&quot;;src:url(https://excalidraw.com/Cascadia.woff2)}</style></defs><path fill="#fff" d="M0 0h904.449v1205.55H0z"/><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(75.99 415.4)">JsonArray</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(52.79 762)">FormatNodeRule</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(544.59 460)">FormatOwnedWithRule</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Cascadia, Segoe UI Emoji" font-size="20.228" style="white-space:pre" transform="translate(54.69 651.5)">FormatJsonArray</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(600.5 240.7)">Format</text><g stroke-linecap="round"><path fill="none" stroke="#1e1e1e" stroke-dasharray="1.5 7" stroke-width="1.5" d="M637.515 396.61c-.42-19.43-2.23-96.34-3.01-115.52"/><path fill="none" stroke="#1e1e1e" stroke-dasharray="1.5 5" stroke-width="1.5" d="M643.815 310.3c-1.45-9.34-3.29-15.23-10.46-29.28M623.305 310.93c3.33-9.43 6.27-15.47 10.05-29.91"/></g><g stroke-linecap="round"><path fill="none" stroke="#1e1e1e" stroke-dasharray="1.5 7" stroke-width="1.5" d="M133.905 687.235c-.06 10.89-.42 54.29-.4 65.27"/><path fill="none" stroke="#1e1e1e" stroke-dasharray="1.5 5" stroke-width="1.5" d="M121.535 723.395c5.26 9.51 9.46 18.44 13.69 30.14M142.055 723.475c-1.05 9.51-3.17 18.41-6.83 30.06"/></g><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Cascadia, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(548.572 412.3)">FormatRefWithRule</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(173.5 197.9)">AsFormat</text><path fill="none" stroke="#1e1e1e" stroke-dasharray="1.5 7" stroke-linecap="round" stroke-width="1.5" d="M378.63 97.87c-1.21 132.63-5.7 663.74-7.14 796.4"/><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(571.3 94.1)">Formatter</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(137.3 94.9)">Python Formatter</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(170.68 237.2)">IntoFormat</text><g stroke-linecap="round"><path fill="none" stroke="#1e1e1e" stroke-dasharray="8 9" stroke-width="1.5" d="M540.497 498.092c-12.52 15.67-26.43 69.14-76.93 93.86-50.49 24.71-188.19 45.61-226.03 54.42"/><path fill="none" stroke="#1e1e1e" stroke-width="1.5" d="M264.957 631.332c-7.19 4.28-10.42 5.82-28.11 15.76M268.907 651.472c-8.16.12-12.21-2.51-32.06-4.38"/></g><g stroke-linecap="round"><path fill="none" stroke="#1e1e1e" stroke-dasharray="8 9" stroke-width="1.5" d="M532.48 470.467c-64.22 7.06-314.74 45.56-384.86 42.65-70.13-2.91-30.12-50.08-35.89-60.1"/><path fill="none" stroke="#1e1e1e" stroke-width="1.5" d="M116.41 481.747c-2.57-10.04-4.9-18.25-6.56-26.75"/><path fill="none" stroke="#1e1e1e" stroke-width="1.5" d="M96.2 478.197c4.49-8.83 9.22-15.8 13.65-23.2"/></g><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(611.1 656.9)">FormatRule</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="18.261" style="white-space:pre" transform="translate(42.99 802.2)">Like FormatRule, but with</text><text y="21" fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="18.261" style="white-space:pre" transform="translate(42.99 802.2)">language specific extensions</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(344.15 920.55)">Alternative:</text><text y="50" fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(344.15 920.55)">struct FormatJsonArray&lt;&apos;a&gt;(pub(crate) &amp;&apos;a JsonArray);</text><text y="75" fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(344.15 920.55)">struct IntoFormatJsonArray&lt;&apos;a&gt;(pub(crate) JsonArray);</text><text y="125" fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(344.15 920.55)">impl Format for FormatJsonArray();</text><text y="175" fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(344.15 920.55)">write!(f, [FormatJsonArray(array)])</text><text y="225" fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(344.15 920.55)">Inspiration</text><text y="250" fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(344.15 920.55)">PathBuf::display() -&gt; Display</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(160.74 287.45)">We put this in</text><text y="23" fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(160.74 287.45)">every downstream</text><text y="46" fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(160.74 287.45)">crate to get .format()</text><g stroke-linecap="round"><path fill="none" stroke="#1e1e1e" stroke-dasharray="1.5 7" stroke-width="1.5" d="M127.876 409.97c-2.9-17.25-20.5-75.43-15.52-104.42 4.99-28.99 37.95-57.65 45.41-69.51"/><path fill="none" stroke="#1e1e1e" stroke-dasharray="1.5 5" stroke-width="1.5" d="M147.386 266.19c3.12-10.66 9.67-21.86 9.61-30.68M131.546 253.15c8.65-5.85 20.86-12.4 25.45-17.64"/></g><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(563.19 694.4)">has JsonArray type param</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(560.59 508)">Gets FormatJsonArray,</text><text y="23" fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(560.59 508)">knows about JsonArray</text><text y="46" fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(560.59 508)">through FormatRule</text><g stroke-linecap="round"><path fill="none" stroke="#1e1e1e" stroke-dasharray="1.5 7" stroke-width="1.5" d="M151.848 942.499c23.76.08 119.04 1.85 143.07 1.87"/><path fill="none" stroke="#1e1e1e" stroke-dasharray="1.5 5" stroke-width="1.5" d="M265.378 953.379c11.01-1.2 16.95-6.92 29.61-9.68M265.598 932.859c11.05 5.23 16.93 5.93 29.39 10.84"/></g><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(11.9 929.9)">implements</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(10 984)">references</text><g stroke-linecap="round"><path fill="none" stroke="#1e1e1e" stroke-dasharray="8 9" stroke-width="1.5" d="M145.54 992.37c23.7-.11 118.4-.33 141.91-.58"/><path fill="none" stroke="#1e1e1e" stroke-width="1.5" d="M260.77 1002.3c7.89-4.34 14.17-7.44 25.45-9.93M260.65 981.78c8.09 1.36 14.4 3.97 25.57 10.59"/></g><g stroke-linecap="round"><path fill="none" stroke="#1e1e1e" stroke-dasharray="1.5 7" stroke-width="1.5" d="M243.75 661.322c58.53.97 294.6 2.95 353.32 3.6"/><path fill="none" stroke="#1e1e1e" stroke-dasharray="1.5 5" stroke-width="1.5" d="M570.75 676.862c9.62-5.37 21.23-10.66 26.48-11.26M570.95 656.342c9.36 2.65 20.9 5.38 26.28 9.26"/></g><g stroke-linecap="round"><path fill="none" stroke="#1e1e1e" d="M543.467 693.67c-13.82 15.75-28.7 77.92-82.05 92.62-53.34 14.7-198.47-3.82-238.03-4.42m322.03-88.63c-13.5 15.47-28.06 76.29-81.9 91.3-53.84 15-201.31-.64-241.17-1.28"/><path fill="none" stroke="#1e1e1e" d="M253.027 772.66c-10.39 3.86-20.86 7.79-29.05 10.5m26.19-9.4c-10.48 3.5-18.98 6.58-27.84 8.58"/><path fill="none" stroke="#1e1e1e" d="M251.857 793.15c-9.88-2.95-19.96-5.82-27.88-9.99m25.02 11.09c-9.97-3.92-18.04-8.28-26.67-11.91"/></g><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Virgil, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(490.3 797.1)">calls</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="20" style="white-space:pre" transform="translate(377.24 371.45)">our goal</text><text fill="#1e1e1e" dominant-baseline="text-before-edge" font-family="Helvetica, Segoe UI Emoji" font-size="36" style="white-space:pre" transform="translate(15.99 10)">Getting Around the Orphan Rules in the Formatter</text><g stroke-linecap="round"><path fill="none" stroke="#1e1e1e" d="M188.82 431.328c35.91-12.38 148.48-42.57 215.3-73.04 66.83-30.46 154.86-91.48 185.65-109.75m-401.84 181.59c36.18-12.31 151.4-40.62 218.32-70.65 66.91-30.02 152.69-91.24 183.16-109.49"/><path fill="none" stroke="#1e1e1e" d="M570.79 272.028c6.08-6.07 14.48-16.65 19.28-23.42m-18.43 24.87c7.2-7.87 12.64-16.47 17.16-22.71"/><path fill="none" stroke="#1e1e1e" d="M559.67 254.788c10.42.37 23.04-3.68 30.4-6.18m-29.55 7.63c11.08-1.52 20.56-3.85 28.28-5.47"/></g></svg>